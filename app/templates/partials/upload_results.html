{% if result.success %}
    {% if is_validation %}
        {% if result.validation.valid %}
            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                <h3 class="text-green-800 font-semibold">‚úÖ Validation Successful!</h3>
                <div class="mt-3 text-sm text-green-700">
                    <p>File analyzed: {{ rows_analyzed }} rows</p>
                    <p>Valid records: {{ result.validation.valid_records or 0 }}</p>
                    <p>Ready for import!</p>
                </div>
            </div>
        {% else %}
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <h3 class="text-yellow-800 font-semibold">‚ö†Ô∏è Validation Issues Found</h3>
                <div class="mt-3 text-sm text-yellow-700">
                    <p>File analyzed: {{ rows_analyzed }} rows</p>
                    <p>Issues found: {{ result.validation.errors|length if result.validation.errors else 0 }}</p>
                    {% if result.validation.errors %}
                        <div class="mt-2">
                            <strong>Errors:</strong>
                            <ul class="list-disc ml-5">
                                {% for error in result.validation.errors[:5] %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                                {% if result.validation.errors|length > 5 %}
                                    <li>... and {{ result.validation.errors|length - 5 }} more</li>
                                {% endif %}
                            </ul>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    {% else %}
        {% if result.import_result.success %}
            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                <h3 class="text-green-800 font-semibold">üéâ Import Successful!</h3>
                <div class="mt-3 text-sm text-green-700">
                    <p>Products imported: {{ result.import_result.imported or 0 }}</p>
                    <p>Products updated: {{ result.import_result.updated or 0 }}</p>
                    <p>Total processed: {{ rows_analyzed }} rows</p>
                    <p class="mt-2"><strong>File:</strong> {{ filename }}</p>
                </div>
            </div>
        {% else %}
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                <h3 class="text-red-800 font-semibold">‚ùå Import Failed</h3>
                <p class="mt-2 text-sm text-red-700">{{ result.import_result.error or "Unknown error occurred" }}</p>
            </div>
        {% endif %}
    {% endif %}
{% else %}
    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
        <h3 class="text-red-800 font-semibold">Error</h3>
        <p class="mt-2 text-sm text-red-700">{{ result.error or "An error occurred" }}</p>
    </div>
{% endif %}